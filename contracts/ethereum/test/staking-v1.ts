// Test the staking implementation. Should not be run in parallel, since
// it uses snapshotting/reverts to rollback.

import * as ethers from "ethers";
import { BigNumber } from "ethers";

import * as hre from "hardhat";

import { expect } from "chai";

import { getLatestTimestamp } from "../script-utils";
import { advanceTime, sendEmptyTransaction } from "./test-utils";

const { MaxUint256 } = ethers.constants;

const SevenDays = BigNumber.from(604800);

const stakingTests = [
  // FLY,Seconds,Bonus,Points
  [463895, 464202000, 1, 59894875.135],
  [659573, 885067200, 1, 162268149.45999998],
  [2417888, 3195669600, 0, 2146325327.168],
  [4517793, 543279600, 1, 682543648.647],
  [6872119, 2892513600, 1, 5522737201.636],
  [6468558, 2250630000, 0, 4043980747.65],
  [7470319, 1752300000, 1, 3637432786.842],
  [4614631, 3239654400, 0, 4152724895.4240003],
  [918273, 1258549200, 0, 321025485.981],
  [8644844, 1482357600, 0, 3559652834.504],
  [6526392, 1187647200, 1, 2154166207.44],
  [679516, 1423886400, 1, 268879045.072],
  [6842260, 1168610400, 0, 2221093387.64],
  [5230194, 1549800000, 1, 2252477189.592],
  [2953688, 3592443600, 0, 2947488208.888],
  [1190506, 1131613200, 1, 374420089.53000003],
  [3515490, 2951481600, 1, 2882786171.76],
  [7567451, 1076810400, 1, 2264801870.182],
  [900494, 36460800, 0, 9120203.232],
  [3324894, 3247218000, 1, 2999629594.662],
  [61536, 2117253600, 0, 36190921.536],
  [7320035, 3151677600, 1, 6409671527.19],
  [6508803, 126144000, 1, 229161936.02400002],
  [123193, 2877386400, 1, 98485658.306],
  [8816108, 646995600, 0, 1584439745.868],
  [2061828, 2255778000, 1, 1292298121.0440001],
  [9684204, 1534809600, 0, 4128724796.5439997],
  [5831256, 2688490800, 0, 4354799474.568],
  [2620809, 2758903200, 0, 2008488426.858],
  [1719220, 1462413600, 0, 698391863.72],
  [4415756, 1511334000, 1, 1854542452.148],
  [6363150, 544194000, 0, 961885569.7500001],
  [7290413, 313686000, 0, 635250136.755],
  [8916177, 507848400, 1, 1259294090.9490001],
  [7082445, 1431147600, 0, 2815562267.745],
  [8282224, 1695193200, 1, 3901383026.32],
  [2988832, 2034792000, 1, 1689849746.816],
  [7880060, 1468328400, 1, 3215356042.2200003],
  [1967625, 3562995600, 0, 1947399782.625],
  [9541937, 1990008000, 0, 5274591934.86],
  [397632, 354967200, 1, 39274112.64],
  [440223, 1524006000, 1, 186435761.169],
  [1106100, 2272662000, 1, 698461224.3000001],
  [1616392, 821998800, 0, 369075634.536],
  [7540401, 283071600, 1, 594176058.399],
  [9479894, 1861470000, 1, 4903408812.242001],
  [4229490, 1365552000, 0, 1604330146.8],
  [277680, 1566892800, 0, 120859664.64],
  [4227191, 1955635200, 1, 2297055589.3999996],
  [1252416, 3425997600, 1, 1192092130.944],
  [4164843, 3540513600, 0, 4096023134.2679996],
  [871189, 3374445600, 0, 816605524.3939999],
  [4662320, 3222288000, 1, 4173932655.36],
  [6225043, 2128327200, 0, 3680257871.6860003],
  [5967365, 1724702400, 1, 2859871610.98],
  [878599, 2337894000, 0, 570575369.585],
  [7052857, 579783600, 1, 1137054552.683],
  [3815137, 1373745600, 1, 1456481961.668],
  [2550956, 3235075200, 1, 2292799252.7999997],
  [1647463, 2330046000, 1, 1066572488.589],
  [2544675, 2652422400, 1, 1875303330.6000001],
  [7872985, 1798614000, 0, 3933461400.775],
  [9285473, 373510800, 0, 963395680.169],
  [5370129, 383673600, 1, 573229049.9760001],
  [1782871, 2999667600, 0, 1485561214.911],
  [6102593, 1811422800, 0, 3070660027.5889997],
  [9152638, 1191805200, 0, 3030044878.366],
  [271041, 1586545200, 1, 119495200.875],
  [5562614, 1248285600, 0, 1928814154.0440001],
  [2362729, 2103728400, 1, 1381102521.473],
  [6227859, 139712400, 0, 241696979.93100002],
  [1150191, 913356000, 1, 292008190.698],
  [9646828, 1597554000, 1, 4282545294.5239997],
  [5091019, 2521702800, 0, 3566121351.987],
  [7647002, 3019363200, 1, 6414917037.760001],
  [8959296, 1687816800, 1, 4201963579.7760005],
  [4884603, 2053803600, 0, 2786670896.103],
  [6322002, 235908000, 0, 414280791.06],
  [96978, 55195200, 0, 1486866.6960000002],
  [3024041, 1357387200, 0, 1140220707.132],
  [2550001, 1683846000, 0, 1192724717.7350001],
  [6606374, 472147200, 0, 866439162.8479999],
  [6420752, 1835730000, 0, 3274101963.6000004],
  [6327030, 3360366000, 1, 5906934189.09],
  [423385, 2442826800, 0, 287293395.755],
  [9411018, 305380800, 0, 798317834.904],
  [5322096, 3301804800, 0, 4881256144.128],
  [1918686, 2375377200, 0, 1266000827.322],
  [3749494, 1945576800, 0, 2026369038.372],
  [5637494, 2589127200, 1, 4055444058.7799997],
  [7615005, 2331601200, 1, 4933266764.175],
  [1877355, 1717970400, 1, 896215484.61],
  [5883704, 1525374000, 1, 2494002102.6319995],
  [3270983, 1547060400, 1, 1406218488.581],
  [7891150, 2359004400, 1, 5172230594.05],
  [2687423, 3553981200, 1, 2653521158.8550005],
  [6829061, 3249583200, 0, 6164333860.382],
  [3765689, 2911125600, 1, 3045741982.846],
  [1527024, 1074686400, 1, 456109852.60800004],
  [3689756, 1535936400, 0, 1574230707.644],
  [4392092, 1409079600, 1, 1719850993.268],
  [1229707, 348919200, 1, 119392252.63000001],
  [2164320, 796129200, 1, 478996480.8],
  [8069566, 2773558800, 1, 6218415629.166],
  [3556416, 2186229600, 1, 2160359124.8640003],
  [8403228, 3385638000, 0, 7902857788.740001],
  [8515749, 170928000, 0, 404327762.52],
  [5553831, 1661464800, 0, 2563192975.458],
  [3247390, 1300471200, 0, 1173093658.3799999],
  [8967699, 3001680000, 0, 7477267426.200001],
  [5099757, 3150068400, 1, 4463241029.559],
  [2881761, 2229933600, 0, 1785037689.1859999],
  [3921425, 2729840400, 1, 2974232241.2250004],
  [5644166, 757202400, 0, 1187160011.444],
  [6908570, 2142133200, 1, 4112015406.85],
  [4827994, 1077757200, 0, 1445390359.738],
  [3299766, 3135880800, 0, 2874353567.748],
  [9839873, 243255600, 0, 664890058.4829999],
  [4094478, 2171098800, 1, 2469997947.978],
  [1172865, 1282802400, 1, 418128718.23],
  [6353816, 3402172800, 1, 6005728544.2560005],
  [4678236, 2912889600, 0, 3785329164.0959997],
  [6930795, 1597507200, 1, 3076718516.4],
  [3600781, 3082273200, 1, 3083546813.255],
  [3542883, 3271114800, 0, 3219215837.769],
  [4670709, 1114876800, 0, 1446462528.792],
  [8651238, 2329178400, 1, 5598752486.556],
  [338777, 284277600, 1, 26808779.117999997],
  [7168397, 1336086000, 1, 2661647311.291],
  [3814140, 2237569200, 0, 2370667274.58],
  [7140650, 1182938400, 1, 2347574375.3],
  [770826, 3546687600, 1, 759540336.534],
  [1483024, 1876010400, 1, 773073716.768],
  [1244147, 296442000, 0, 102449284.71499999],
  [1351279, 2176286400, 0, 816880586.196],
  [4522304, 420544800, 1, 529046255.744],
  [2414994, 1041303600, 1, 698945148.4860001],
  [1205464, 630849600, 0, 211240689.50399998],
  [6300105, 1371718800, 0, 2400547908.465],
  [6937964, 1415088000, 0, 2727174889.12],
  [3235100, 1031346000, 1, 927351120.3],
  [2383639, 1217077200, 1, 806253973.5550001],
  [8754455, 1137621600, 1, 2767931055.17],
  [9278677, 2306624400, 1, 5946676253.269],
  [7633311, 1692428400, 0, 3588564534.0090003],
  [3883579, 1756083600, 1, 1895066161.051],
  [355822, 1685973600, 0, 166640693.972],
  [9154472, 3156800400, 1, 8028993748.903999],
  [3244869, 1952082000, 1, 1760059128.897],
  [4468691, 984974400, 1, 1223402472.452],
  [8837545, 2659402800, 0, 6528497755.035],
  [431134, 2995063200, 0, 358687104.908],
  [4648790, 1602547200, 0, 2069418166.08],
  [8052486, 2674591200, 1, 5983882871.46],
  [8460792, 3082604400, 0, 7244798512.967999],
  [7434917, 995313600, 0, 2055576112.492],
  [6693037, 2217625200, 1, 4124082073.4750004],
  [9737410, 2977606800, 1, 8055574282.21],
  [9801857, 3154161600, 1, 8589602533.668],
  [6935043, 1779670800, 1, 3429524399.4030004],
  [9068331, 3039105600, 0, 7655448756.876],
  [7310396, 1208224800, 0, 2453500484.7279997],
  [7894356, 757756800, 0, 1661667205.728],
  [6525498, 3280600800, 0, 5946542766.444],
  [7512407, 2791922400, 0, 5826127050.338],
  [2229078, 1901134800, 1, 1177534973.358],
  [858104, 1005818400, 1, 239893270.448],
  [3924286, 1928541600, 0, 2102263555.9160001],
  [8916494, 978109200, 1, 2424082641.3100004],
  [762845, 1429448400, 0, 302902101.305],
  [8377967, 2378426400, 0, 5535104969.758],
  [2212258, 2525968800, 1, 1552620183.1080003],
  [896880, 660726000, 1, 164759546.64000002],
  [5234044, 683863200, 1, 995148785.7199999],
  [8552806, 2274098400, 1, 5404193104.772],
  [6787049, 132555600, 1, 251046155.461],
  [2162238, 753321600, 1, 452824530.912],
  [3001445, 3131686800, 0, 2610996024.2850003],
  [1198076, 1335362400, 0, 444407122.984],
  [4553489, 1720422000, 1, 2176854611.807],
  [1587523, 2025345600, 0, 893134089.7080001],
  [7508808, 3380673600, 0, 7051341381.408],
  [8416613, 3516508800, 0, 8221414911.303999],
  [6729498, 963867600, 1, 1802893079.6820002],
  [145000, 3558085200, 1, 143336125.0],
  [9240172, 676562400, 1, 1738094833.544],
  [7534760, 200984400, 1, 421923955.72],
  [6510021, 2421180000, 0, 4378314623.55],
  [2140548, 566305200, 0, 336723184.23600006],
  [5984102, 2584162800, 0, 4295526049.946],
  [1242218, 2489972400, 0, 859191259.6620001],
  [82998, 2695021200, 1, 62147657.43],
  [7673382, 2570878800, 0, 5479815307.806001],
  [877251, 2813130000, 1, 685653240.8429999],
  [1288672, 2097284400, 1, 750969741.9840001],
  [9884852, 2218280400, 1, 6092597724.1640005],
  [9938296, 3297024000, 0, 9101889008.64],
  [2347989, 2258874000, 0, 1473280917.885],
  [7226332, 1905850800, 1, 3826855863.572],
  [342212, 3300940800, 1, 313841256.352],
  [3866563, 446238000, 0, 479279816.665],
  [4495076, 731883600, 1, 914608618.644],
  [3534786, 1601175600, 0, 1572170304.006],
  [6018771, 3406334400, 1, 5695996348.811999],
  [5052368, 2638386000, 0, 3702804721.6800003],
  [2865667, 3331789200, 0, 2652166211.499],
  [4556148, 2974762800, 1, 3765615316.6679997],
  [233596, 128386800, 1, 8369978.276],
  [5962983, 493275600, 1, 818055674.7870001],
  [4608891, 2663146800, 0, 3409487032.833],
  [9721780, 3521365200, 1, 9511060418.500002],
  [8236934, 3490632000, 1, 7988079749.991999],
  [8195959, 1076997600, 0, 2451952270.1940002],
  [9461854, 294868800, 0, 775001537.4319999],
  [9551571, 231735600, 0, 614844176.841],
  [4078343, 3380004000, 0, 3829115459.2700005],
  [1144655, 2317561200, 1, 737083417.425],
  [2965468, 1991052000, 1, 1640609585.384],
  [4958, 2283328800, 0, 3144651.1640000003],
  [4241514, 2996596800, 1, 3531297929.7840004],
  [5467718, 2803708800, 1, 4259221096.768],
  [5378486, 2135332800, 0, 3190238213.928],
  [1186430, 2305213200, 1, 759914347.1500001],
  [5420607, 1476302400, 0, 2222904200.988],
  [4501744, 54194400, 0, 67769254.176],
  [2847643, 1645902000, 0, 1301928141.385],
  [76204, 476434800, 0, 10085065.972000001],
  [4142711, 1504101600, 0, 1730849512.066],
  [414034, 177609600, 1, 20496339.136],
  [4929850, 895150800, 0, 1225821992.0500002],
  [5438943, 1940547600, 0, 2931813273.663],
  [8358427, 2415387600, 0, 5608011369.807],
  [1752200, 794966400, 1, 387222182.40000004],
  [2968969, 2675991600, 1, 2207425482.5309997],
  [7386019, 2585538000, 0, 5304675775.895],
  [5337245, 1542952800, 0, 2287532532.5099998],
  [5538688, 1740333600, 1, 2678476284.672],
  [2725799, 71283600, 0, 53973545.999],
  [4124281, 40755600, 1, 47383864.408999994],
  [6239364, 758181600, 1, 1315095707.736],
  [7525463, 2599333200, 1, 5434927005.915],
  [2566436, 197622000, 1, 141315665.468],
  [4650400, 3132468000, 1, 4047233819.2000003],
  [2180527, 2165266800, 1, 1311872639.537],
  [9818274, 1795392000, 0, 4896569609.28],
  [3453673, 971722800, 0, 932225777.179],
  [5879612, 353772000, 1, 578777246.056],
  [2812739, 948607200, 0, 741162351.978],
  [7993067, 3329298000, 0, 7392028326.935],
  [8943194, 1649736000, 1, 4099810539.0319996],
  [1883581, 277693200, 0, 145293787.597],
  [7620241, 2382364800, 1, 5044111846.576],
  [2866299, 3467520000, 0, 2760819196.8],
  [3743444, 3403544400, 0, 3539160517.476],
  [1880356, 3114007200, 0, 1626511700.712],
  [1430584, 1445436000, 0, 574393781.84],
  [4390944, 1592938800, 1, 1943655752.5440001],
  [5949704, 2038564800, 0, 3369126984.672],
  [3733519, 105969600, 0, 109899865.28400001],
  [4098533, 2953400400, 1, 3363079942.8810005],
  [6337725, 1156500000, 0, 2035994156.25],
  [3008126, 1440676800, 0, 1203815927.688],
  [7358054, 1154235600, 0, 2359146631.534],
  [1446235, 3536971200, 0, 1420914317.6200001],
  [2063535, 3481621200, 0, 1995679778.5949998],
  [3381979, 3226899600, 0, 3031474078.419],
  [8972194, 3099726000, 1, 7726880389.382],
  [544417, 1153519200, 1, 174534646.03],
  [2785263, 3499437600, 0, 2707459463.358],
  [4330605, 313225200, 1, 377520490.875],
  [1528565, 750348000, 0, 318598802.95],
  [6727555, 2542968000, 1, 4753340530.14],
  [206971, 1830877200, 0, 105260690.267],
  [688494, 1465912800, 1, 280469046.804],
  [8444394, 1207166400, 0, 2831607973.656],
  [2724232, 3546180000, 0, 2683504731.6],
  [1237483, 2624212800, 0, 902060757.884],
  [420801, 638467200, 0, 74629898.95199999],
  [209672, 3589894800, 0, 209083450.696],
  [1985426, 1782262800, 0, 982930806.0979999],
  [9076273, 1440698400, 1, 3633794810.826],
  [9342808, 928656000, 0, 2410070751.6800003],
  [8550186, 3055024800, 1, 7257278174.196],
  [8110815, 1590339600, 1, 3584404362.135],
  [7113606, 1971158400, 1, 3896207369.472],
  [5083139, 2776248000, 1, 3920869101.372],
  [2192102, 2998936800, 1, 1826472539.0119998],
  [7650265, 1174402800, 1, 2496977643.6150002],
  [6825514, 910227600, 0, 1725769785.274],
  [5510312, 3419355600, 0, 5233810054.151999],
  [1087335, 223963200, 0, 67645285.02],
  [7112145, 2112534000, 0, 4173513368.175],
  [8199600, 1280250000, 1, 2917360282.8],
  [475496, 511722000, 1, 67669262.248],
  [5473985, 3058156800, 1, 4651004199.159999],
  [3859945, 3220844400, 1, 3454060203.4150004],
  [2580379, 2681708400, 0, 1922173344.3009999],
  [4205390, 2698927200, 1, 3153495799.3],
  [2760516, 3284604000, 0, 2518667193.2400002],
  [6882905, 2393348400, 0, 4575886019.195],
  [7278632, 2325538800, 0, 4701872535.2560005],
  [7887084, 421318800, 0, 923049101.772],
  [5934017, 2566857600, 1, 4232045980.128],
  [282131, 2034385200, 1, 159481601.025],
  [9670919, 2222992800, 0, 5971773140.662],
  [6103093, 2024816400, 1, 3433703874.381],
  [4614426, 3228566400, 0, 4138327983.024],
  [8754674, 3335353200, 1, 8112562435.470001],
  [1241679, 1428609600, 0, 492742927.64400005],
  [2615947, 1978891200, 0, 1437965138.3240001],
  [1214259, 909198000, 1, 306871177.257],
  [5191771, 1511211600, 1, 2180279039.679],
  [6703342, 2553044400, 0, 4753869376.218],
  [5105237, 2294251200, 0, 3253526698.204],
  [3060114, 1700636400, 0, 1445594793.486],
  [8021318, 3544048800, 1, 7897998257.068],
  [2998519, 1662861600, 0, 1385033917.2140002],
  [4546724, 2409843600, 1, 3044345441.956],
  [9954138, 3191835600, 0, 8825547787.698],
  [7573818, 685933200, 0, 1443092560.266],
  [7356750, 2795522400, 0, 5712766504.5],
  [8488400, 2756556000, 0, 6499652764.0],
  [6973730, 2325819600, 0, 4505454977.530001],
  [2206621, 2930810400, 1, 1796811761.1220002],
  [8053493, 1338660000, 1, 2996044358.874],
  [3393289, 3188628000, 0, 3005537865.9700003],
  [6758915, 2770923600, 1, 5203479132.135],
  [161130, 2236798800, 0, 100115386.28999999],
  [8288096, 2901704400, 1, 6681838130.912],
  [1756880, 544582800, 0, 265768508.24],
  [3928874, 963680400, 1, 1052376403.0180001],
  [3139101, 1913630400, 1, 1669160452.932],
  [9084966, 769356000, 0, 1941548083.8600001],
  [7109182, 1480330800, 1, 2924511308.5220003],
  [41257, 1531252800, 0, 17548582.436],
  [8330625, 980557200, 1, 2270470190.625],
  [9570125, 3039771600, 1, 8082439498.625],
  [3502382, 1930600800, 0, 1878250414.196],
  [47396, 2226146400, 1, 29316416.632000003],
  [3548321, 2154859200, 1, 2124521715.54],
  [3671238, 842788800, 0, 859466185.7040001],
  [2737330, 2646259200, 0, 2012134637.76],
  [899476, 987062400, 1, 246773039.552],
  [7504158, 131054400, 1, 274442066.37600005],
  [2434915, 2047561200, 0, 1384899299.805],
  [778912, 364582800, 1, 79013612.192],
  [168898, 3278491200, 1, 153842432.28],
  [8791474, 1321815600, 1, 3229451267.686],
  [8338044, 3387405600, 1, 7847049941.016],
  [3634728, 1637546400, 0, 1653343264.272],
  [1480133, 376444800, 1, 155023209.888],
  [1868479, 3089037600, 0, 1603278301.614],
  [7992106, 3228685200, 1, 7169118884.65],
  [9136737, 1369281600, 0, 3475212738.372],
  [3080882, 3277616400, 1, 2805503524.1940002],
  [6486719, 301838400, 1, 544962236.628],
  [4084121, 1839139200, 0, 2086463063.512],
  [7348335, 2213179200, 0, 4517550604.62],
  [1495249, 3075440400, 0, 1277374772.961],
  [6288219, 1593979200, 0, 2784247303.068],
  [5598767, 1101492000, 1, 1713995331.846],
  [4555463, 1464080400, 1, 1853422009.791],
  [3169599, 1776661200, 1, 1564783482.315],
  [2581176, 1154955600, 1, 828529103.0639999],
  [4476039, 3280777200, 0, 4079135193.753],
  [3518442, 1881158400, 1, 1839131854.704],
  [7849578, 2503494000, 0, 5458714284.87],
  [3736896, 3162013200, 1, 3282881820.48],
  [6257922, 586483200, 0, 1019490588.8640001],
  [4348094, 2658002400, 0, 3210345635.396],
  [4877422, 1541696400, 1, 2089570500.9740002],
  [8005738, 3365020800, 0, 7483187469.264],
  [9215456, 3155101200, 1, 8078130497.76],
  [1302185, 1342810800, 0, 485718911.555],
  [5022035, 393300000, 0, 548657323.75],
  [5686868, 1765630800, 0, 2789141471.204],
  [184821, 2787238800, 1, 143125567.22100002],
  [9521183, 2399133600, 1, 6346763460.702001],
  [2134857, 3110464800, 1, 1844913531.402],
  [2038150, 1982970000, 1, 1123006382.95],
  [9895342, 2738372400, 1, 7528643367.834001],
  [9975457, 2706141600, 1, 7500286756.418],
  [3242592, 3232908000, 0, 2911944893.76],
  [9582776, 3042846000, 0, 8099697672.36],
  [2527938, 3154093200, 1, 2215244709.09],
  [2835923, 1756846800, 1, 1384443726.063],
  [4008055, 2983201200, 0, 3321342912.6850004],
  [494758, 3305354400, 0, 454264036.73200005],
  [4499428, 1933988400, 0, 2417178210.732],
  [9630465, 2312164800, 1, 6186957412.74],
  [4079476, 2811610800, 0, 3186082994.428],
  [8261847, 2478319200, 1, 5689025225.73],
  [1652724, 2885403600, 1, 1324937596.356],
  [6504191, 2558199600, 0, 4621949670.701],
  [2005449, 2211022800, 1, 1232029544.109],
  [2169625, 668239200, 1, 403094628.75],
  [4967250, 3416767200, 1, 4715261407.5],
  [6717014, 720864000, 1, 1346143341.7120001],
  [5066247, 1224262800, 0, 1722893816.0310001],
  [6322705, 1684177200, 1, 2958994326.475],
  [9578260, 1866708000, 0, 4966615157.8],
  [6803155, 574653600, 0, 1085960420.03],
  [5541734, 2113902000, 1, 3255009507.442],
  [2224414, 1952964000, 0, 1206722350.8600001],
  [6708840, 2406448800, 1, 4485704853.84],
  [5464303, 675417600, 0, 1025190671.648],
  [8543069, 163162800, 1, 388632751.879],
  [2259271, 2471738400, 1, 1551581470.5020003],
  [139031, 3248805600, 1, 125491327.03400001],
  [6296428, 902084400, 0, 1577752631.812],
  [8929164, 1690459200, 0, 4192885397.808],
  [954932, 1577106000, 0, 418341385.22],
  [2563877, 3030930000, 1, 2159022874.561],
  [9605128, 1159502400, 0, 3093658046.7520003],
  [1615751, 1872493200, 0, 840411877.887],
  [8380408, 3221604000, 0, 7499543315.12],
  [3800098, 479516400, 0, 506169253.502],
  [8698228, 787050000, 1, 1903111398.8040001],
  [1559478, 1902409200, 1, 824363462.97],
  [4191507, 2262916800, 0, 2634731002.116],
  [2588590, 563828400, 1, 405857260.33000004],
  [1053816, 3170181600, 0, 927996692.496],
  [8660415, 2876018400, 1, 6920208530.7300005],
  [3396981, 757720800, 1, 715560459.7260001],
  [4242015, 2048889600, 1, 2414996107.56],
  [9991042, 2904015600, 0, 8059483841.181999],
  [5269586, 1213527600, 1, 1777215304.774],
  [7836130, 68385600, 1, 150171595.32],
  [592257, 2958537600, 0, 486726278.7120001],
  [7503530, 622054800, 0, 1296557459.29],
  [8396580, 2780697600, 1, 6487063362.719999],
  [4110925, 2742825600, 0, 3132097313.8],
  [1278297, 1913925600, 0, 679601486.862],
  [9022243, 1818010800, 1, 4557775518.553],
  [6979477, 439887600, 0, 852829274.107],
  [6009891, 21261600, 0, 35494416.24600001],
  [347587, 1255518000, 0, 121222704.185],
  [4849129, 3241767600, 1, 4367411676.011],
  [7542058, 1882645200, 0, 3944172025.506],
  [2241111, 1775710800, 0, 1105434724.083],
  [4244386, 199537200, 1, 235966639.67000002],
  [5052268, 1101931200, 0, 1546458816.656],
  [9755422, 1506967200, 0, 4083639160.044],
  [2214591, 1393128000, 0, 857002425.18],
  [9846731, 542372400, 1, 1485152896.537],
  [1987789, 2681582400, 1, 1481006170.028],
  [2353914, 1212012000, 0, 792492226.3800001],
  [6203177, 2605287600, 1, 4490225500.043],
  [5523355, 1496440800, 1, 2296865083.33],
  [6564956, 1078347600, 1, 1967576397.8040001],
  [6988433, 2730556800, 1, 5301816626.048],
  [292675, 2294337600, 0, 186526460.3],
  [76405, 3463034400, 0, 73498095.37],
  [5771359, 1966518000, 1, 3153603298.857],
  [6664068, 199238400, 1, 369935742.81600004],
  [6141039, 1875312000, 1, 3200021730.4319997],
  [4354975, 2793420000, 0, 3379242851.2500005],
  [1171597, 1029981600, 0, 335200931.282],
  [1906637, 3527247600, 1, 1868426087.883],
  [2459957, 498034800, 1, 340731104.027],
  [7874420, 3121318800, 0, 6827381995.86],
  [7698497, 985496400, 0, 2107455855.253],
  [181670, 1765314000, 0, 89084609.55000001],
  [1638177, 574804800, 0, 261564445.23600003],
  [8015716, 3342949200, 0, 7443369830.452001],
  [4080217, 1703775600, 1, 1931733856.2630002],
  [6274891, 1049893200, 1, 1831044568.255],
  [1879139, 3429385200, 0, 1790080965.3730001],
  [7663661, 896587200, 0, 1908650099.372],
  [8361298, 2312254800, 0, 5370403176.314],
  [8950413, 2482534800, 0, 6172142151.909],
  [2564120, 1806580800, 1, 1287177983.52],
  [886308, 590896800, 0, 145476822.504],
  [7901963, 1742547600, 1, 3826201602.2669997],
  [8196029, 524113200, 1, 1194612206.895],
  [8367057, 1936260000, 0, 4500221607.450001],
  [3427727, 1970384400, 0, 1876094391.1829998],
  [5407523, 999302400, 1, 1501950328.296],
  [2363990, 1310547600, 0, 860589283.59],
  [881116, 2738696400, 1, 670456143.372],
  [5101131, 3120642000, 0, 4421889901.695001],
  [8715320, 1167652800, 1, 2828260785.1200004],
  [574776, 1927141200, 1, 307783926.36],
  [2778942, 476701200, 1, 368446025.07],
  [7258884, 2130562800, 1, 4297193998.044],
  [7055613, 1783184400, 0, 3494849731.677],
  [3857563, 2900602800, 1, 3108775303.6330004],
  [9088001, 1783436400, 1, 4503713391.567],
  [7693010, 2359404000, 0, 5041921823.900001],
  [2336707, 2696025600, 1, 1750343092.248],
  [3954420, 284904000, 0, 312952798.8],
  [6069911, 2138731200, 0, 3606085565.812],
  [4401778, 2755724400, 1, 3370208120.366],
  [7375700, 3181046400, 0, 6517345536.8],
  [8051404, 3436380000, 0, 7685467688.200001],
  [722074, 1325458800, 0, 265855371.54200003],
  [1535437, 2060280000, 1, 878988548.516],
  [7424937, 1388764800, 0, 2864303096.616],
  [6217989, 3007900800, 1, 5196348535.344001],
  [3315440, 1377889200, 0, 1268974713.68],
  [2605923, 1187856000, 0, 859850353.08],
  [9149750, 1955332800, 1, 4971205571.0],
  [6359487, 747270000, 1, 1321138907.841],
  [8201879, 846507600, 0, 1928598029.9390001],
  [1375388, 868820400, 1, 332165829.716],
  [7306262, 2382073200, 0, 4834458583.9939995],
  [189041, 3339414000, 1, 175389026.10300002],
  [6065646, 1645599600, 1, 2773692537.2339997],
  [7392964, 1880348400, 1, 3862727581.468],
  [6642467, 860360400, 0, 1587476545.8630002],
  [3921498, 1078635600, 0, 1174963152.258],
  [1252331, 387511200, 1, 135013805.11],
  [4010792, 421095600, 1, 469820164.088],
  [5533806, 1222502400, 1, 1880121656.1120002],
  [8047469, 3594006000, 1, 8035421938.907],
  [9004532, 1124316000, 1, 2813718150.2960005],
  [8908756, 2502943200, 0, 6193919514.072],
  [6573923, 1563732000, 1, 2856619352.574],
  [6008657, 1077865200, 0, 1799033966.399],
  [3237077, 3468798000, 1, 3119645557.671],
  [9894012, 2077200, 0, 5708844.924000001],
  [983478, 2548656000, 0, 696263084.88],
  [3784917, 3293532000, 0, 3462707015.79],
  [619396, 858538800, 1, 147819474.79599997],
  [4875692, 143053200, 1, 194564489.26000002],
  [3847194, 1704718800, 1, 1822419644.994],
  [6467548, 3403004400, 1, 6114723853.956],
  [42747, 1201622400, 0, 14268264.648],
  [8113070, 1907733600, 0, 4299326732.820001],
  [7304298, 582566400, 0, 1182010719.552],
  [3107032, 441255600, 0, 380832019.272],
  [5601324, 471438000, 1, 734462406.8520001],
  [8585741, 1747094400, 0, 4166694450.264],
  [1634296, 73130400, 1, 33473650.672000002],
  [698113, 117298800, 0, 22746615.879],
  [7381225, 1775217600, 1, 3641040192.9000006],
  [2853154, 435841200, 0, 345422795.318],
  [7189365, 1940115600, 1, 3875707588.485],
  [2856607, 1923098400, 1, 1526462229.734],
  [3814983, 1980450000, 1, 2099358440.019],
  [2482638, 2266498800, 1, 1563443763.138],
  [9617159, 3177997200, 0, 8489806770.542999],
  [926389, 409942800, 1, 105646327.949],
  [3316472, 210873600, 1, 194822831.168],
  [5876510, 819079200, 1, 1338022561.9],
  [8169373, 3058848000, 0, 6941352850.64],
  [6429742, 2657484000, 1, 4747451443.636001],
  [1017921, 369252000, 1, 104579167.698],
  [5621742, 790286400, 0, 1234107290.808],
  [4344952, 2392232400, 0, 2887259708.5680003],
  [6963259, 1614081600, 0, 3122018952.204],
  [7811273, 2437855200, 0, 5289653472.686],
  [90460, 499770000, 0, 12558109.500000002],
  [2117584, 3247934400, 1, 1910848509.248],
  [9565593, 2743174800, 0, 7288914906.849001],
  [9774374, 3171232800, 0, 8610226507.852],
  [5049246, 1212343200, 0, 1700394181.4520001],
  [7984003, 3525220800, 1, 7819500602.188001],
  [3891912, 3300879600, 0, 3568536923.8320003],
  [2135101, 2846966400, 0, 1688489113.224],
  [9394697, 3238459200, 1, 8452784678.78],
  [9989908, 2587478400, 0, 7180186435.552],
  [9975865, 1884812400, 0, 5222953903.535],
  [9491298, 982731600, 0, 2590944019.3380003],
  [9272253, 3501774000, 0, 9019259576.895],
  [1575100, 2462209200, 0, 1077284919.7],
  [3425086, 989352000, 1, 941857548.968],
  [9629834, 1991530800, 0, 5327253058.302],
  [1852419, 1576947600, 1, 811746677.571],
  [6525335, 2240082000, 1, 4061453333.355],
  [6010421, 100767600, 0, 168237694.211],
  [4510065, 3064950000, 1, 3840514280.2950006],
  [2715089, 558846000, 0, 421476840.91499996],
  [1695625, 1969704000, 1, 928029127.5],
  [215461, 2452543200, 0, 146785391.782],
  [1398803, 2496463200, 1, 970251724.8900001],
  [2291587, 3349789200, 0, 2132314828.739],
  [1614051, 2462958000, 1, 1104532222.473],
  [4054157, 2193642000, 0, 2470380297.165],
  [151573, 1869285600, 1, 78729138.222],
  [912486, 2190214800, 1, 555303392.646],
  [5863814, 910368000, 1, 1483826405.0720003],
  [4450102, 257018400, 0, 317710582.18799996],
  [2239025, 1368918000, 1, 851776607.575],
  [4199547, 58316400, 0, 68028461.85300002],
  [480557, 729273600, 0, 97349314.832],
  [3798835, 588204000, 1, 621329854.93],
  [6347418, 1420531200, 0, 2504640363.4560003],
  [8748751, 3105334800, 1, 7548081161.511001],
  [3634094, 855540000, 1, 864252966.8920001],
  [5656027, 330638400, 1, 520422356.324],
  [8154294, 1724871600, 0, 3906975038.514],
  [7975591, 929426400, 0, 2059090230.834],
  [6029829, 20077200, 0, 33628356.333],
  [4722731, 2249852400, 0, 2951513243.029],
  [1604838, 3267774000, 1, 1457005137.954],
  [7645672, 1557993600, 0, 3308863345.472],
  [5149520, 2071785600, 1, 2964393281.28],
  [761084, 846972000, 1, 179188094.792],
  [1517429, 699897600, 0, 295012476.46400005],
  [7348188, 1775404800, 0, 3623891179.584],
  [2059776, 1255377600, 0, 718276847.6159999],
  [4317077, 1803128400, 0, 2162290039.913],
  [9985092, 1158170400, 0, 3212343887.688],
  [1340382, 1922850000, 1, 716156719.926],
  [1931388, 3289698000, 1, 1765236484.5240002],
  [8946229, 3418383600, 0, 8494900693.178999],
  [26532, 2733397200, 0, 20145137.364],
  [9686433, 2913066000, 1, 7839743607.849001],
  [3519046, 301384800, 0, 294607493.028],
  [5637023, 1124226000, 1, 1761304747.4190001],
  [415793, 2780748000, 0, 321170986.99],
  [9378617, 2415844800, 0, 6293689752.956],
  [9053251, 2025169200, 1, 5094400136.465],
  [8386940, 3175866000, 0, 7398832663.900001],
  [9674349, 2754140400, 0, 7401254284.611],
  [1707703, 1413608400, 1, 670848923.411],
  [6320039, 3305836800, 0, 5803615973.231999],
  [9903434, 3151353600, 0, 8669228441.184],
  [7880528, 2753197200, 0, 6026846562.2560005],
  [4846515, 3010150800, 1, 4053242271.315],
  [4870468, 1792461600, 1, 2425853478.632],
  [2898596, 566510400, 1, 456621625.072],
  [2714937, 389595600, 0, 293813197.07699996],
  [4664063, 2538802800, 0, 3289204501.0490003],
  [3231881, 3033327600, 0, 2723153843.671],
  [6765762, 945828000, 0, 1777568650.26],
  [2306391, 1345888800, 0, 862262726.478],
  [7510381, 2148361200, 1, 4483209282.235001],
  [6842749, 971168400, 0, 1845961554.981],
  [1943827, 3155248800, 0, 1703682724.766],
  [118574, 1527537600, 1, 50332765.81599999],
  [7181333, 520128000, 0, 1037558991.84],
  [587816, 389451600, 1, 63689275.784],
  [4561939, 1601204400, 1, 2029821072.2330003],
  [4351794, 2036912400, 0, 2462284211.3459997],
  [5191360, 2511475200, 1, 3622531008.0],
  [9196467, 2472487200, 0, 6316151928.534],
  [2490513, 2223838800, 0, 1538472067.029],
  [413137, 840711600, 0, 96480296.747],
  [9655086, 2710728000, 1, 7271708710.728],
  [5505297, 602892000, 1, 922896978.4860001],
  [1930048, 629784000, 1, 337966845.184],
  [4791677, 2948896800, 1, 3925849716.1619997],
  [6974053, 903556800, 1, 1751575255.2680001],
  [2443931, 2662095600, 1, 1807626680.909],
  [6306150, 2135718000, 1, 3742214451.4500003],
  [3659585, 3157837200, 0, 3210103791.545],
  [9998523, 1281218400, 1, 3560094096.426],
  [7844479, 239292000, 1, 522740391.602],
  [8693469, 2273054400, 0, 5489091100.476001],
  [3321641, 792835200, 1, 732089676.4],
  [363865, 3264843600, 0, 329989532.365],
  [4799777, 2387746800, 0, 3183514492.351],
  [8273844, 1404842400, 0, 3228735239.4960003],
  [4408002, 1883901600, 1, 2307474438.948],
  [7002498, 366440400, 0, 712777268.922],
  [9625392, 2148336000, 0, 5744048929.92],
  [8916374, 3270074400, 1, 8100721939.228],
  [2341767, 2233692000, 1, 1453389587.346],
  [7431736, 19958400, 1, 42450076.032],
  [7132057, 1264402800, 0, 2504942455.711],
  [2137772, 639871200, 0, 379971870.824],
  [4065619, 1138111200, 0, 1285312921.898],
  [9341531, 32184000, 0, 83513287.14],
  [9510820, 2626772400, 0, 6939655410.38],
  [3707576, 2019956400, 0, 2080317186.024],
  [8530422, 82260000, 1, 196353253.59600002],
  [3702911, 2899652400, 0, 2982542991.149],
  [1762385, 223470000, 0, 109400048.875],
  [8833665, 3162301200, 0, 7759641508.305],
  [5637708, 3107980800, 1, 4868138307.168001],
  [1096110, 3476678400, 1, 1058745802.3200002],
  [8457030, 1917900000, 1, 4506903513.54],
  [2217095, 2847585600, 0, 1753713276.6200001],
  [2141721, 378691200, 0, 225291915.432],
  [5243055, 2860484400, 1, 4166902232.085],
  [5990085, 2392833600, 1, 3982472071.7400002],
  [3066558, 3197934000, 1, 2724584651.514],
  [6318932, 2283786000, 1, 4009697257.396],
  [6607567, 3444537600, 0, 6322225826.672],
  [4712861, 523101600, 1, 685598741.114],
  [3499591, 1145426400, 0, 1113478866.8339999],
  [9400121, 2334204000, 0, 6094944455.190001],
  [1409348, 1341320400, 1, 525344332.436],
  [9012984, 842238000, 0, 2108632671.72],
  [325689, 154915200, 1, 14069764.8],
  [4416091, 1400346000, 1, 1718535060.9230003],
  [3014388, 3584944800, 0, 3001781829.384],
  [5305294, 433123200, 0, 638290531.7279999],
  [5037084, 305751600, 0, 427804581.204],
  [1750719, 459093600, 1, 223556311.986],
  [406478, 2427861600, 1, 274199490.37200004],
  [1563406, 773006400, 0, 335700789.944],
  [5571938, 3289636800, 0, 5091570081.144],
  [6618996, 326433600, 0, 600184081.296],
  [1010934, 3064302000, 0, 860501966.13],
  [7822779, 1868947200, 0, 4061211363.4080005],
  [6624798, 2236946400, 1, 4117590198.516],
  [6232221, 2634771600, 1, 4562291150.829],
  [6011566, 2095884000, 0, 3499873609.54],
  [7600865, 3458782800, 0, 7302705868.6449995],
  [1119650, 607726800, 1, 189199576.65],
  [670099, 1419692400, 0, 264259571.541],
  [2066611, 402598800, 0, 231115307.963],
  [6470048, 2578251600, 1, 4634812414.752],
  [6764425, 878781600, 0, 1651236729.05],
  [89843, 2893928400, 0, 72222002.567],
  [5066143, 1349172000, 1, 1899489524.1339998],
  [3422564, 2940199200, 1, 2795858305.9599996],
  [4784174, 1992254400, 0, 2647581028.296],
  [8286710, 3592630800, 0, 8269747104.630001],
  [9931270, 2692472400, 1, 7429354667.79],
  [2514474, 1457744400, 1, 1018605873.978],
  [2490168, 1712811600, 0, 1184774621.208],
  [9710665, 2289211200, 0, 6174934188.18],
  [8959749, 105937200, 1, 265163771.65499997],
  [9626902, 1123171200, 1, 3005133728.3199997],
  [3791451, 3595676400, 0, 3786897467.349],
  [179454, 2995034400, 1, 149327621.388],
  [4359509, 1187560800, 0, 1438106109.902],
  [6840076, 1160953200, 0, 2205835589.012],
  [7531697, 3029990400, 1, 6340423548.904],
  [4580215, 1234137600, 1, 1570940461.56],
  [3303476, 1609830000, 1, 1477786864.268],
  [7543105, 2975191200, 1, 6235206024.050001],
  [4172579, 225270000, 1, 261800124.197],
  [73703, 2282680800, 0, 46733450.834],
  [6709873, 913140000, 1, 1703086545.114],
  [6009541, 874504800, 0, 1459825680.638],
  [452973, 815943600, 1, 102742882.88700001],
  [8874840, 1144904400, 1, 2823947463.48],
  [4278129, 140756400, 1, 167989291.443],
  [5036549, 3500982000, 0, 4898018719.755],
  [4576999, 2782929600, 1, 3538953934.7959995],
  [4891474, 1793419200, 0, 2436795385.528],
  [8981547, 2721081600, 1, 6790265089.128],
  [6129263, 1945396800, 1, 3313209890.228],
  [2003246, 1147554000, 0, 638564711.19],
  [3089807, 1207544400, 0, 1036410872.2030001],
  [9467914, 60577200, 1, 160907198.43],
  [9759286, 2352369600, 1, 6378708366.744],
  [8101639, 2314238400, 1, 5209451096.668],
  [2435538, 1638424800, 1, 1108866353.868],
  [3968835, 2421730800, 0, 2669847211.005],
  [6275859, 3322263600, 0, 5791682754.009001],
  [1946230, 1541768400, 1, 833836942.51],
  [9122832, 2407870800, 1, 6103366187.472],
  [8916224, 1796500800, 1, 4450943355.904],
  [5485782, 750942000, 0, 1144306696.29],
  [5761429, 1567080000, 1, 2508917963.772],
  [3809472, 3258777600, 1, 3449034997.248],
  [7940428, 3230928000, 1, 7127709313.344],
  [6377291, 3540358800, 0, 6271638420.003],
  [7925100, 854791200, 1, 1883083011.0],
  [499149, 3496820400, 1, 484926747.543],
  [9054773, 1860044400, 1, 4679932260.731001],
  [580631, 142585200, 0, 22997052.016999997],
  [5371049, 380782800, 1, 569014302.109],
  [1148843, 1525402800, 0, 486791202.489],
  [3001910, 2562937200, 0, 2137140780.57],
  [5843340, 527090400, 0, 855546782.76],
  [4916614, 3373340400, 0, 4607059065.946],
  [4835404, 3119439600, 0, 4189930755.4440002],
  [8649445, 2678832000, 1, 6437678120.16],
  [7468486, 817797600, 1, 1697840796.324],
  [1396487, 814460400, 1, 316174432.209],
  [5057122, 2014790400, 0, 2830289127.0080004],
  [2555717, 2483917200, 1, 1763815308.9650002],
  [4888928, 531381600, 0, 721635106.368],
  [5703992, 3317803200, 0, 5256867475.104],
  [5366074, 3417966000, 1, 5095639968.622001],
  [4209699, 688874400, 0, 805542742.4460001],
  [737163, 316274400, 0, 64762718.202],
  [7675556, 2452683600, 1, 5230653471.764],
  [9083160, 3436642800, 1, 8672519419.56],
  [4533143, 2028722400, 0, 2554580207.362],
  [1780461, 1280088000, 0, 633096322.38],
  [6987938, 3516116400, 0, 6825112056.662],
  [532642, 1927213200, 0, 285142970.35400003],
  [3044437, 3025980000, 1, 2559512985.766],
  [9365632, 1484143200, 1, 3862667605.7599998],
  [4999029, 551577600, 1, 766771064.136],
  [8225993, 95198400, 1, 218910125.71600002],
  [2266976, 415558800, 0, 261683840.608],
  [8627912, 3118014000, 1, 7474213491.096],
  [3344294, 665452800, 0, 618186057.3119999],
  [5038715, 218361600, 1, 306474801.16],
  [8381111, 1427158800, 1, 3323957003.711],
  [1108906, 234277200, 1, 72350571.97],
  [1386641, 2967386400, 0, 1142972123.634],
  [8428109, 1461308400, 0, 3421129577.171],
  [1890527, 2868274800, 0, 1506264153.561],
  [5416656, 836240400, 1, 1259139603.7919998],
  [130377, 2371662000, 0, 85891715.715],
  [3505567, 2909534400, 0, 2833213271.668],
  [2699616, 343130400, 0, 257311199.424],
  [7310061, 2336043600, 0, 4743505892.961],
  [1165620, 1150063200, 1, 372567120.6000001],
  [6406557, 1526857200, 0, 2717193800.739],
  [5519517, 862650000, 1, 1323541539.981],
  [9835356, 1770537600, 1, 4838837786.304],
  [9132802, 2154873600, 0, 5466676089.952],
  [9923335, 2861100000, 1, 7888237611.530001],
  [9347242, 2349856800, 1, 6102870385.252],
  [3752647, 3147678000, 0, 3281145667.685],
  [7370399, 3480753600, 1, 7127500130.556],
  [4353034, 1056358800, 1, 1278055135.4339998],
  [8497857, 1503082800, 1, 3549478388.187],
  [6485134, 2033096400, 1, 3663562443.8780003],
  [8232544, 1596531600, 1, 3652359913.056],
  [5092092, 2464336800, 0, 3485730473.4960003],
  [9785490, 3338377200, 0, 9074349085.23],
  [7384789, 1811469600, 0, 3715922437.7539997],
  [3208705, 3259645200, 1, 2905883465.625],
  [4760299, 3321835200, 0, 4392480216.868],
  [1852497, 939081600, 1, 483546176.92800003],
  [995361, 2110842000, 1, 583792166.193],
  [9012620, 3103311600, 1, 7770671951.38],
  [494561, 100969200, 1, 13954038.615],
  [4651397, 659041200, 0, 851517294.599],
  [7653238, 1723676400, 1, 3665648445.1460004],
  [7694026, 463910400, 1, 992775562.832],
  [24252, 1632279600, 1, 11000197.907999998],
  [1800506, 2519326800, 1, 1260319990.386],
  [281, 2044940400, 1, 159666.16700000002],
  [3172107, 3097868400, 1, 2730191257.509],
  [6696737, 2541175200, 0, 4727106107.034],
  [3568003, 1121540400, 0, 1111572086.617],
  [4568796, 439434000, 0, 557690083.74],
  [2404277, 2087542800, 1, 1394579235.357],
  [235524, 2632147200, 0, 172203843.648],
  [8264428, 3066958800, 1, 7042127363.228001],
  [6815587, 2356056000, 0, 4460529068.02],
  [6101167, 90046800, 0, 152608490.171],
  [7289716, 982602000, 1, 1990916205.9080002],
  [1388375, 3532341600, 0, 1362281880.25],
  [547787, 277221600, 0, 42182885.722],
  [7694294, 2029842000, 1, 4339681841.8220005],
  [5560168, 945597600, 0, 1460467087.888],
  [664729, 2229559200, 1, 411792968.21000004],
  [9374304, 3338010000, 0, 8692089026.4],
  [4561030, 2476080000, 0, 3137076434.0],
  [3176567, 826689600, 1, 729987802.868],
  [8390064, 2924744400, 0, 6816331305.456],
  [185698, 2491610400, 1, 128555382.83600001],
  [2096786, 2871871200, 1, 1673046517.2600002],
  [7799074, 3470904000, 0, 7519399206.360001],
  [7808139, 486378000, 1, 1056230386.947],
  [4943573, 1235350800, 0, 1696401905.6690001],
  [1942647, 3238783200, 1, 1748052050.01],
  [6270197, 418950000, 0, 729694175.875],
  [2169633, 751892400, 0, 453147378.74700004],
  [2519602, 3486963600, 0, 2440489016.802],
  [6612808, 501714000, 1, 922704938.6639999],
  [3803455, 2841886800, 0, 3002496821.915],
  [6060239, 155595600, 0, 261929589.81900004],
  [8770593, 173239200, 0, 422058476.346],
  [6079663, 281512800, 1, 476438870.65800005],
  [9081414, 2382400800, 0, 6009879994.092],
  [9287214, 2874978000, 1, 7418375788.422],
  [7312376, 381402000, 1, 775938154.488],
  [3223158, 1288933200, 0, 1154009820.846],
  [6145408, 726976800, 0, 1240991400.704],
  [5479263, 2607033600, 0, 3967950762.288],
  [404125, 1788858000, 0, 200811733.125],
  [6966280, 1759478400, 1, 3405897887.3599997],
  [81343, 680580000, 0, 15377894.15],
  [4229363, 1303473600, 1, 1532061370.572],
  [7639651, 1889384400, 1, 4010793856.047],
  [4798855, 1525226400, 0, 2033150093.2700002],
  [8259670, 3163510800, 1, 7259597416.070001],
  [5352135, 1552543200, 1, 2309071603.0499997],
  [9394752, 253224000, 1, 662405174.016],
  [4732308, 23216400, 1, 31313682.036],
  [8756667, 2476792800, 0, 6024569382.665999],
  [7589015, 1647608400, 0, 3473256906.0350003],
  [9521250, 2558905200, 1, 6769370718.75],
  [2021230, 665946000, 0, 373897231.55],
  [8149419, 3214249200, 0, 7276184305.893],
  [2900716, 280350000, 0, 225893258.5],
  [8311100, 1340985600, 0, 3095851505.6],
  [1476930, 2123654400, 1, 871495038.96],
  [2117338, 430488000, 1, 253546990.82400003],
  [7131687, 2142165600, 1, 4244879946.0179996],
  [383711, 2409526800, 0, 256822760.543],
  [4857783, 2343524400, 0, 3162314719.557],
  [3846241, 3223004400, 0, 3443458796.239],
  [9784628, 2145218400, 1, 5832244934.936],
  [8453471, 1279155600, 1, 3005115952.319],
  [9879798, 1758254400, 1, 4826992668.456],
  [8462415, 508312800, 0, 1194876073.17],
  [9924019, 802753200, 0, 2212927224.7530003],
  [9869158, 3299619600, 1, 9047343344.182],
  [7988287, 846543600, 1, 1879795708.5530002],
  [6976845, 2099678400, 0, 4069202985.1800003],
  [2763351, 2774217600, 1, 2129946737.184],
  [7859335, 996310800, 1, 2176414907.5350003],
  [2961193, 1815415200, 1, 1493773808.8500001],
  [5464190, 972601200, 1, 1477161803.65],
  [8846212, 3112610400, 1, 7650044905.783999],
  [8143933, 870105600, 1, 1969724211.112],
  [6788784, 3286000800, 1, 6197793197.6640005],
  [9627910, 3092745600, 1, 8272916458.24],
  [9738966, 1822899600, 1, 4933068709.014],
  [1121301, 1368720000, 0, 426318640.2],
  [683310, 1422518400, 0, 270005846.64000005],
  [2636651, 3234772800, 0, 2369157482.7479997],
  [215115, 2080738800, 0, 124332813.045],
  [4474876, 1101103200, 1, 1369446302.28],
  [7076189, 2950225200, 0, 5798986418.823],
  [5474631, 597362400, 1, 909347158.3620001],
  [5225357, 3031250400, 1, 4400701608.974],
  [7140523, 84027600, 1, 167866555.207],
  [4355638, 378925200, 1, 459193136.15000004],
  [6933772, 73173600, 1, 142100723.368],
  [3618648, 2306631600, 1, 2319187884.552],
  [6526511, 3130556400, 0, 5675447439.089001],
  [3473146, 453042000, 0, 437078058.37],
  [9174271, 2913598800, 0, 7425040271.243001],
  [677221, 770292000, 0, 144904977.37],
  [9650612, 1310450400, 1, 3514579179.3840003],
  [1773138, 1105909200, 1, 545000561.37],
  [4625635, 2201342400, 0, 2828501792.34],
  [7335268, 1167588000, 1, 2380279795.464],
  [4004893, 3228807600, 1, 3592625309.6870003],
  [4610143, 651542400, 0, 834362120.712],
  [8941436, 1830513600, 1, 4548007772.784],
  [779901, 3288459600, 1, 712540170.7290001],
  [7022686, 2664554400, 1, 5199048944.892],
  [6053921, 1291824000, 1, 2173406070.368],
  [3318299, 2276078400, 0, 2097974632.956],
  [7189052, 290710800, 1, 581745276.892],
  [9559535, 3287980800, 1, 8732596984.359999],
  [6170905, 2434460400, 0, 4173006626.2949996],
  [7617828, 171504000, 0, 362913325.92],
  [3404352, 402696000, 0, 380810814.71999997],
  [4130950, 1416178800, 0, 1625045503.85],
  [528936, 2662772400, 0, 391232272.824],
  [4736096, 1765933200, 0, 2323230323.552],
  [8983962, 1922835600, 0, 4798522767.401999],
  [6165256, 35845200, 1, 62423217.00000001],
  [4198206, 1340834400, 1, 1564343916.1320002],
  [1730996, 2449663200, 1, 1178167807.48],
  [9215180, 3276342000, 0, 8386689242.1],
  [6177117, 1048086000, 1, 1799412713.451],
  [2642913, 497822400, 1, 365916590.676],
  [6451494, 3525469200, 1, 6319012570.709999],
  [2695888, 1165060800, 1, 872917750.8479999],
  [7236417, 2010351600, 1, 4042255299.7830005],
  [5474793, 3311906400, 1, 5037586980.606],
  [5417229, 733503600, 0, 1103765825.979],
  [6117943, 2477376000, 1, 4211151469.304],
  [741545, 1187463600, 0, 244599359.795],
  [1586033, 1717246800, 0, 756558359.429],
  [8288355, 603705600, 0, 1389923980.08],
  [5520563, 1288810800, 0, 1976378115.6890001],
  [7983961, 3206988000, 1, 7113693283.078],
  [1966080, 3139282800, 0, 1714466979.84],
  [3334355, 1694736000, 0, 1569680959.8],
  [1854989, 528015600, 1, 272384729.771],
  [8244931, 2408702400, 0, 5516551413.204],
  [9339008, 2131653600, 1, 5531438404.351999],
  [6781130, 153824400, 1, 290890133.60999995],
  [8355448, 2820034800, 0, 6545181702.6640005],
  [2774739, 500043600, 0, 385414021.839],
  [4873919, 299599200, 0, 405617287.018],
  [3873520, 3401103600, 1, 3660162644.88],
  [4238275, 2336605200, 1, 2751594086.8749995],
  [6071541, 2706091200, 0, 4563928797.372],
  [7380418, 123026400, 1, 253458314.95600003],
  [8969472, 1457060400, 0, 3630295127.808],
  [5649183, 2101384800, 0, 3297529802.394],
  [391138, 3366169200, 1, 365798124.6700001],
  [4207338, 694688400, 1, 812592639.306],
  [833673, 274572000, 0, 63584239.71],
  [572067, 2467098000, 0, 392040375.435],
  [3815371, 3262964400, 0, 3458172151.609],
  [1276603, 3002637600, 0, 1064771157.7980001],
  [7134282, 2407986000, 1, 4773212774.946],
  [1854491, 198280800, 0, 102141655.298],
  [7250577, 2066558400, 1, 4163368320.324],
  [6381691, 1488283200, 1, 2639339763.7799997],
  [3917674, 2864869200, 1, 3118331385.41],
  [1551486, 1493182800, 1, 643775152.3260001],
  [4997399, 2705007600, 1, 3755840195.0410004],
  [7728790, 1129881600, 1, 2427025550.9599996],
  [2182019, 3521548800, 0, 2134468441.9520001],
  [6766779, 749091600, 1, 1409174959.971],
  [3287566, 1521597600, 1, 1390094682.0440001],
  [9904104, 1860728400, 0, 5119124330.375999],
  [5201062, 1808989200, 0, 2613518051.814],
  [4872592, 2176156800, 0, 2945423392.8960004],
  [4591551, 2498594400, 0, 3186784337.754],
  [4304745, 1816581600, 0, 2172200155.47],
  [7070867, 2525443200, 0, 4960298050.904],
  [9841900, 629280000, 0, 1720364120.0],
  [5772695, 1259650800, 0, 2019883298.5849998],
  [1126412, 90054000, 0, 28177196.18],
  [8740397, 1478455200, 1, 3590992107.4500003],
];

const withSnapshot = async (k: () => Promise<void>) => {
  const snapshotId = await hre.network.provider.request({
    method: "evm_snapshot",
    params: []
  });

  await k();

  await hre.network.provider.request({
    method: "evm_revert",
    params: [snapshotId]
  });
};

describe("StakingV1", async () => {
  let signer: ethers.Signer;

  let signerAddr: string;

  let testToken: ethers.Contract;
  let stakingContract: ethers.Contract;

  let flyContract: ethers.Contract;

  before(async function() {
    const stakingContractFactory = await hre.ethers.getContractFactory("StakingV1");
    stakingContract = await stakingContractFactory.deploy();

    const testTokenFactory = await hre.ethers.getContractFactory("TestGovToken");
    testToken = await testTokenFactory.deploy("Test Token", "TT", 6, MaxUint256);

    await stakingContract.init(
      testToken.address, // fly token
      "0x0000000000000000000000000000000000000000", // zero since we don't use the merkle
      "0x0000000000000000000000000000000000000000", // zero since no emergency
      "0x0000000000000000000000000000000000000000", // zero for no operator
    );

    await testToken.approve(stakingContract.address, MaxUint256);

    ({ signer } = testToken);

    signerAddr = await signer.getAddress();
  });

  it("cant stake too little", async () => {
    await expect(stakingContract.stake(0)).to.be.revertedWith("too little fly");
  });

  it("can stake some", async () => {
    await withSnapshot(async () => {
      const amountStaked = 1000 * 1e6;
      expect(await stakingContract.stake(amountStaked)).to.be.equal(amountStaked);
      let { flyStaked } = await stakingContract.stakingDetails(signerAddr)
      expect(flyStaked).to.be.equal(amountStaked);
      await advanceTime(hre, 1000); // advance time by 1000 seconds
      await sendEmptyTransaction(signer);
      let points: BigNumber;
      ({ flyStaked, points } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(amountStaked);
      expect(points).to.be.equal(1000);
    });
  });

  it("can't double down on unstaking an amount, can only unstake an amount once", async () => {

  });

  it("cant stake for someone else", async () => {

  });

  it("staking for someone else is fine as merkle", async () => {

  });

  it("stake then unstake 0 doesnt cause weirdness", async () => {
    await withSnapshot(async () => {
      const amountStaked = BigNumber.from(41554 * 1e6);
      // simulate first
      expect(await stakingContract.callStatic.stake(amountStaked)).to.be.equal(amountStaked);
      // then send on-chain to continue the life of the testing
      await stakingContract.stake(amountStaked);
      expect(await stakingContract.stakingPositionsLen(signerAddr)).to.be.equal(1);
      let { flyStaked } = await stakingContract.stakingDetails(signerAddr);
      expect(flyStaked).to.be.equal(amountStaked);
      const { flyRemaining } = await stakingContract.callStatic.beginUnstake(0);
      await stakingContract.beginUnstake(0);
      expect(flyRemaining).to.be.equal(0);
      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(amountStaked);
    });
  });

  it("cant stake, have a certain number of points in the future, begin unstaking, have the same points", async () => {
      const amountStaked = BigNumber.from(4454545* 1e6);
  });

  it("stake, have a certain number of points in the future, begin unstaking, unstake fully, dont have the same amount of points", async () => {
    await withSnapshot(async () => {
      // first, stake an arbitrary amount.
      const stakeAmount = BigNumber.from(
        // random number i chose
        "51317253906870152199262132321886643552971805669285596207895276767218547159680"
      );
      expect(await stakingContract.callStatic.stake(stakeAmount)).to.be.equal(stakeAmount);
      await stakingContract.stake(stakeAmount);
      // wait a couple of seconds to simulate a real user with real points.
      const firstDelaySeconds = 9603965;
      await advanceTime(hre, firstDelaySeconds);
      let { flyStaked, points } = await stakingContract.stakingDetails(signerAddr);
      // ensure that the fly staked has remained the same.
      expect(flyStaked).to.be.equal(stakeAmount);

      // second, begin to unstake. check that the points after beginning are 0, as well as the FLY.
      const unstakeAmount = stakeAmount.add(100);
      const { flyRemaining: unstakeFlyRemaining } =
        await stakingContract.callStatic.beginUnstake(unstakeAmount);
      console.log("we did the unstake");
      // since we didn't take the full amount, 100 is enough.
      expect(unstakeFlyRemaining).to.be.equal(100);

      // thirdly, begin the unstaking process.
      await stakingContract.beginUnstake(unstakeAmount);
      await stakingContract.beginUnstake(unstakeAmount);
      ({ flyStaked, points } = await stakingContract.stakingDetails(signerAddr));
      // make sure that the points are 0.
      expect(flyStaked).to.be.equal(0);
      expect(points).to.be.equal(0);
      // make sure that the FLY that we're about to receive is recorded as being there.
      const amountUnstaking = await stakingContract.amountUnstaking(signerAddr);
      expect(amountUnstaking).to.be.equal(stakeAmount);

      // fourthly, attempt to unstake before the time. make sure nothing happens.
      await expect(stakingContract.callStatic.finaliseUnstake()).to.be.revertedWith("no fly returned");

      // finally, advance time, and finalise the withdraw.
      const unlockSeconds = SevenDays.add(1000);
      const secondsUntilFullyUnstaked = await stakingContract.secondsUntilFullyUnstaked(signerAddr);
      expect(secondsUntilFullyUnstaked).to.lt(unlockSeconds);
      await advanceTime(hre, unlockSeconds);
      await sendEmptyTransaction(signer); // advance time
      expect(await stakingContract.callStatic.finaliseUnstake()).to.be.equal(stakeAmount);
      await stakingContract.finaliseUnstake();
      ({ flyStaked, points } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(0);
      expect(points).to.be.equal(0);
    });
  });

  it("can unstake fully one position, leaving a few positions left", async () => {
    await withSnapshot(async () => {
      const s1 = BigNumber.from(41554 * 1e6);
      expect(await stakingContract.callStatic.stake(s1)).to.be.equal(s1);
      await stakingContract.stake(s1);
      let { flyStaked } = await stakingContract.stakingDetails(signerAddr);

      const s2 = BigNumber.from(17279899).mul(1e6);
      expect(await stakingContract.callStatic.stake(s2)).to.be.equal(s2);
      await stakingContract.stake(s2);
      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s1.add(s2));

      const s3 = BigNumber.from(172 * 1e6);
      expect(await stakingContract.callStatic.stake(s3)).to.be.equal(s3);
      await stakingContract.stake(s3);
      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s1.add(s2).add(s3));

      /*
       * unstake half of the second amount, and test that the time is correct,
       * as well as the new amount staked.
       */

      const flyUnstake1 = s2.div(2);
      let { flyRemaining } = await stakingContract.callStatic.beginUnstake(flyUnstake1);
      await stakingContract.beginUnstake(flyUnstake1);

      // the timestamp test isn't reliable, so we don't bother.
      //expect(await getLatestTimestamp(hre)).to.be.equal(unstakedBy.sub(604800));
      expect(flyRemaining).to.be.equal(0);

      // the amount of positions remaining should be equal to 2 since we
      // closed the newest position.
      expect(await stakingContract.stakingPositionsLen(signerAddr)).to.be.equal(2);

      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s1.add(s2.sub(flyUnstake1)).add(s3));

      /*
       * unstake more than the second amount, this time the entire first position as well.
       */

      const flyUnstake2 = s2.sub(flyUnstake1).add(s1);
      ({ flyRemaining } = await stakingContract.callStatic.beginUnstake(flyUnstake2));

      await stakingContract.beginUnstake(flyUnstake2);
      expect(flyRemaining).to.be.equal(0);

      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s3);
      expect(await stakingContract.stakingPositionsLen(signerAddr)).to.be.equal(1);

      /*
       * unstake just 1 this time.
       */

      const flyUnstake3 = 1;
      ({ flyRemaining } = await stakingContract.callStatic.beginUnstake(flyUnstake3));

      await stakingContract.beginUnstake(flyUnstake3);
      expect(flyRemaining).to.be.equal(0);

      ({ flyStaked } = await stakingContract.stakingDetails(signerAddr));
      expect(flyStaked).to.be.equal(s3.sub(1));
      expect(await stakingContract.stakingPositionsLen(signerAddr)).to.be.equal(1);
    });
  });

  it("every automated test we created works", async () => {
    for (const i in stakingTests) {
      const [fly, seconds, isBonus, expectedPoints] = stakingTests[i];
      console.log("i", i);
      const points = await stakingContract.calculatePointsAddSecs(seconds, {
        receivedBonus: !!isBonus,
        flyVested: fly,
        depositTimestamp: 0 // we can set this to 0 for this function.
      });
      console.log("fly, seconds, isBonus, points, expected points", fly, seconds, isBonus, points, expectedPoints);
      expect(points).to.be.equal(BigNumber.from(expectedPoints));
    }
  });
});
