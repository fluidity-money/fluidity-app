
import type { ethers } from 'ethers';

import { BigNumber } from 'ethers';

import { expect } from 'chai';

import { commonContracts } from './setup-common';

const getVEFluidBalanceArgs = [
  [34,3818718,4.117085616438356],
  [211,4880256,32.65265144596651],
  [530,6189975,104.0298944063927],
  [60,11708542,22.27652587519026],
  [696,3789303,83.62997488584475],
  [51,24592490,39.77095985540335],
  [75,31342204,74.53910768645358],
  [206,4274826,27.924091704718418],
  [570,29027798,524.6652987062405],
  [922,2168346,63.39469216133942],
  [864,654484,17.931068493150686],
  [818,21981012,570.156894216134],
  [409,13528534,175.45568258498224],
  [278,28205359,248.63932654743786],
  [825,29052526,760.0308837519026],
  [219,93339,0.6481875],
  [391,25255715,313.13370639903604],
  [430,2009844,27.404646118721462],
  [779,17582025,434.3099148592085],
  [533,6879099,116.26584750761035],
  [425,29731259,400.6781162798072],
  [562,9834464,175.25902993404364],
  [244,27774345,214.89536339421613],
  [293,3415734,31.73547888127854],
  [555,18400347,323.82650256849314],
  [985,23851256,744.9735908168442],
  [643,15121676,308.32184386098425],
  [200,3769721,23.907413749365805],
  [450,9734579,138.90666381278538],
  [904,3345339,95.89632343987823],
  [615,12286146,239.59854737442922],
  [626,17018541,337.8236512557078],
  [835,30698432,812.8231456113648],
  [321,24851711,252.96167018645357],
  [895,14753996,418.7222989599188],
  [297,26417436,248.79434589041097],
  [876,26789057,744.1404722222222],
  [740,17214872,403.9512075088787],
  [378,332525,3.9857448630136987],
  [582,19905877,367.36492941400303],
  [85,15917965,42.90420551116185],
  [977,26816615,830.7912498414511],
  [247,10538340,82.53963660578387],
  [210,29572367,196.92405726788434],
  [216,13291637,91.0386095890411],
  [328,7295405,75.87813419583968],
  [385,978663,11.947782058599696],
  [55,3510952,6.123235667174023],
  [362,29620442,340.0114156519533],
  [386,25710884,314.70069837645866],
  [121,6235705,23.92568191907661],
  [744,24366154,574.8483820395738],
  [218,20014940,138.35796930492137],
  [884,25789439,722.9155275240994],
  [74,23123209,54.25917890664637],
  [366,29125526,338.0245597412481],
  [879,21875333,609.7291256659056],
  [782,1343156,33.30631633688483],
  [321,16110388,163.98511377473363],
  [753,8897422,212.4479568112633],
  [482,8222249,125.6698382166413],
  [61,26109252,50.50305593607306],
  [186,18233664,107.5425388127854],
  [930,18817839,554.9400770547945],
  [902,5741265,164.21299562404872],
  [343,15947793,173.45551113013698],
  [876,12013526,333.70905555555555],
  [121,13821119,53.030041825215626],
  [35,14389234,15.969786593099949],
  [291,14935225,137.81552749238966],
  [724,6974027,160.10894051243025],
  [80,18730257,47.514604261796045],
  [792,24461980,614.3419634703197],
  [564,23590304,421.8966088280061],
  [368,18849033,219.953200913242],
  [665,18186216,383.4929490106545],
  [264,30563697,255.86047716894979],
  [798,27740243,701.9505934170472],
  [377,30632739,366.2018836567732],
  [381,6611041,79.87083399923897],
  [638,27928841,565.0241171359716],
  [674,3995864,85.40120294266869],
  [323,4421111,45.2821807775241],
  [749,19557189,464.49564183789954],
  [561,1213467,21.586599029680364],
  [406,23399013,301.24300095129377],
  [543,30983956,533.4946761796043],
  [985,19319040,603.413698630137],
  [526,15203924,253.59157864028413],
  [631,27801794,556.2827249492643],
  [675,5506284,117.85710616438357],
  [324,28662928,294.4821369863014],
  [259,13367466,109.78480764840182],
  [4,31078826,3.942012430238458],
  [268,10126377,86.05622260273972],
  [595,22836080,430.85577118214104],
  [733,19521967,453.754496797311],
  [152,20711976,99.82941248097413],
  [855,9612534,260.61379280821916],
  [639,1809229,36.659605878995436]
];

const lockMoveForwardIncreaseAmountIncreaseTime1 = [
  [217,12660118,135,15670069,1963169,181.43],
  [836,26081081,716,3997823,14505940,412.83],
  [674,18313231,303,11536965,10446450,414.7],
  [653,25168452,197,1656641,13504666,275.82],
  [684,16476106,705,6371162,16412916,139.56],
  [329,1398321,274,3374954,315320,46.51],
  [127,25391907,452,1165535,7172499,78.07],
  [357,13986078,198,2179836,1376052,167.43],
  [549,5755188,584,14394488,2973164,299.02],
  [442,28439292,239,2133955,7034400,329.91],
  [908,3905692,13,11873982,2645459,378.17],
  [33,8646784,246,3081105,8542962,3.33],
  [340,3477598,785,24885869,714406,298.09],
  [693,10437392,716,8686324,1144052,395.1],
  [975,402777,181,8130064,299330,254.56],
  [474,6589964,832,15121157,6139794,234.04],
  [469,27437025,795,1040983,25651720,42.03],
  [440,7972114,49,11284942,3044033,226.21],
  [741,22257048,654,6369122,15062620,318.7],
  [511,12238416,207,1980535,7900907,102.38],
  [526,29566175,300,1679421,16865590,239.85],
    [823,29081713,888,2036182,4849936,685.52],
  [251,6542524,306,22208274,5386078,185.96],
  [3,21759657,476,6776389,8228535,1.93],
  [199,16056025,48,7548924,6564366,107.53],
  [644,10020091,865,1069866,8005770,62.98],
  [675,5376397,591,12355136,1176188,354.35],
  [168,8098462,275,9907581,7988290,53.37],
  [652,10515149,612,1591998,4892061,149.17],
  [963,3573589,398,15481877,6402,581.69],
  [958,22979911,654,831354,10016265,419.06],
  [952,13198939,610,10001766,1839201,644.86],
  [391,15709751,713,3536750,10244906,111.61],
  [339,13777737,682,7857164,512154,227.06],
  [806,27053232,448,3709947,1313613,752.67],
  [358,29132752,843,1046541,20445010,110.5],
  [99,6993045,934,14237633,3863707,54.52],
  [234,4143910,826,23439325,2206727,188.3],
  [309,6312290,146,9910148,5501747,105.04],
  [375,5541466,459,7191916,2819162,117.89],
  [87,31140024,305,15486,11134624,55.23],
  [155,22489583,735,1585988,16827763,35.62],
  [497,26177837,277,4595157,5259256,402.09],
  [92,3785118,895,4211174,2814163,15.12],
  [805,23629550,191,2537874,2872296,594.64],
  [79,28205426,858,2535405,22008030,21.88],
  [785,12310211,165,18210874,9868462,514.09],
  [857,4499667,885,18258033,2884025,540.07],
  [546,9600933,79,19677255,202345,503.41],
  [16,20757203,636,5440690,15596016,5.38]
];

const lockMoveForwardIncreaseAmountIncreaseTime2 = [
  [968,14977585,592,2183559,14689906,75.85],
  [848,17045667,835,5629741,10554189,325.94],
  [439,16447437,261,5123265,10675399,151.67],
  [577,29865593,49,1443899,23682516,139.55],
  [934,4065987,334,19503055,1347112,658.15],
  [825,816941,460,21336811,479553,567.01],
  [29,31380175,702,126011,5037381,24.34],
  [796,26101674,664,2737653,5512297,588.8],
  [987,6101194,920,20357414,1206825,790.32],
  [948,13745847,442,14858935,3949182,741.17],
  [360,20040532,800,10444575,9747210,236.73],
  [656,31454625,296,1058,24618747,142.22],
  [976,17683502,873,6854412,4102328,632.46],
  [583,17229959,222,13034142,8972790,393.61],
  [320,19135964,80,4370367,5785686,179.81],
  [889,12706528,322,4841160,5754907,332.44],
  [584,9463028,896,12817016,8066965,263.21],
  [699,23421740,381,7683238,7445280,524.42],
  [724,8439762,574,21976560,2626553,637.99],
  [331,10451548,105,8605058,6754359,129.12],
  [248,23185778,756,4162170,2764328,193.33],
  [529,27152467,202,3977137,24309304,114.41],
  [111,10473760,363,549678,6222928,16.9],
  [710,6442466,322,24539830,5308624,578.02],
  [586,8922042,512,3829330,5623375,132.45],
  [735,5178302,376,19190328,3267926,491.79],
  [500,6231657,184,10084362,2017412,226.7],
  [732,4236216,283,9195110,2346802,257.29],
  [188,2994435,401,4110292,101512,41.75],
  [482,15800494,261,1193253,282532,255.42],
  [706,11855280,650,128416,5255208,150.63],
  [937,29784233,823,1346498,13977011,509.67],
  [596,24020929,518,4645264,10985386,334.15],
  [280,6839546,188,8417260,1966381,118.0],
  [17,20747723,709,7978574,12481754,8.76],
  [614,7317663,360,3978767,6935774,84.9],
  [408,12997225,414,17538101,4386168,338.31],
  [898,3386895,165,8943969,435928,338.71],
  [190,7693162,490,4901111,7551125,30.38],
  [522,24545006,338,4256184,17407634,188.59],
  [638,26551436,469,1480233,690066,553.14],
  [311,18278638,61,8372552,10267322,161.57],
  [133,28491133,631,337780,10434611,77.58],
  [16,30436730,712,988683,17693566,6.97],
  [149,2602669,266,8765186,10110,53.66],
  [839,25488169,712,2818649,15127615,350.63],
  [193,17787265,1000,11158986,6126408,139.66],
  [362,17868969,129,68122,2338855,179.05],
  [169,30084679,913,448521,11715757,100.84],
  [477,28990620,552,993710,7813896,335.34]
];

// const lockMoveForwardIncreaseAmountIncreaseTimeToOutput = async(
  // veGovLockup: ethers.Contract,
  // [
    // initialBpt: number,
    // lockTime: number,
    // bptAdded: number,
    // lockTimeAdded: number,
    // secondsToProgress: number,
    // output: number
  // ]
// ) => {
//
// };

const testGetVEFluidBalance = async (
  veGovLockup: ethers.Contract,
  bptLocked: number,
  lockTime: number,
  veFluid: any
) => {
  const out = await veGovLockup.getVEFluidBalance(bptLocked, lockTime);
  expect(out).to.be.equal(veFluid);
};

describe("VEGovLockup", async () => {
  let veGovLockup: ethers.Contract;

  before(async () => {
    veGovLockup = commonContracts.veGovLockup;
  });

  it("test the get ve fluid balance function", async () => {
    await Promise.all(getVEFluidBalanceArgs.map(([bptLocked, lockTime, veFluid], i) => {
      return testGetVEFluidBalance(
        veGovLockup,
        bptLocked,
        lockTime,
        BigInt(veFluid * 1e18)
      )
    }));
  });

  it("test batch #1", async () => {

  });

  it("test batch #2", async () => {
  });
});
